(function(){function e(a,b){for(a=String(a);a.length<b;)a="0"+a;return a}function b(a,b){Date.prototype[a]===void 0&&(Date.prototype[a]=b)}var r="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),s="January,February,March,April,May,June,July,August,September,October,November,December".split(","),v={su:0,sun:0,sunday:0,mo:1,mon:1,monday:1,tu:2,tue:2,tuesday:2,we:3,wed:3,wednesday:3,th:4,thu:4,thursday:4,fr:5,fri:5,friday:5,sa:6,sat:6,saturday:6},t=s.concat(r),u="su,sun,sunday,mo,mon,monday,tu,tue,tuesday,we,wed,wednesday,th,thu,thursday,fr,fri,friday,sa,sat,saturday".split(","),
w={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,oct:9,october:9,nov:10,november:10,dec:11,december:11},x=[31,28,31,30,31,30,31,31,30,31,30,31],j=function(a,b,d,e){for(;e>=d;e--){var f=a.substring(b,b+e);if(f.length<d)break;if(f.match(/^(\d+)$/))return f}return null},y=Date.parse,z=function(a,b){a+="";b+="";for(var d=0,e=0,f="",c="",n,o,h=new Date,i=h.getYear(),h=h.getMonth()+1,k=1,g=0,l=0,m=0,p="";e<b.length;){f=b.charAt(e);
for(c="";b.charAt(e)===f&&e<b.length;)c+=b.charAt(e++);if(c==="yyyy"||c==="yy"||c==="y"){c==="yyyy"&&(o=n=4);c==="yy"&&(o=n=2);c==="y"&&(n=2,o=4);i=j(a,d,n,o);if(i===null)return NaN;d+=i.length;i.length===2&&(i=i>70?1900+(i-0):2E3+(i-0))}else if(c==="MMM"||c==="NNN"){for(f=h=0;f<t.length;f++){var q=t[f];if(a.substring(d,d+q.length).toLowerCase()===q.toLowerCase()&&(c==="MMM"||c==="NNN"&&f>11)){h=f+1;h>12&&(h-=12);d+=q.length;break}}if(h<1||h>12)return NaN}else if(c==="EE"||c==="E")for(c=0;c<u.length;c++){if(f=
u[c],a.substring(d,d+f.length).toLowerCase()===f.toLowerCase()){d+=f.length;break}}else if(c==="MM"||c==="M"){h=j(a,d,c.length,2);if(h===null||h<1||h>12)return NaN;d+=h.length}else if(c==="dd"||c==="d"){k=j(a,d,c.length,2);if(k===null||k<1||k>31)return NaN;d+=k.length}else if(c==="hh"||c==="h"){g=j(a,d,c.length,2);if(g===null||g<1||g>12)return NaN;d+=g.length}else if(c==="HH"||c==="H"){g=j(a,d,c.length,2);if(g===null||g<0||g>23)return NaN;d+=g.length}else if(c==="KK"||c==="K"){g=j(a,d,c.length,2);
if(g===null||g<0||g>11)return NaN;d+=g.length}else if(c==="kk"||c==="k"){g=j(a,d,c.length,2);if(g===null||g<1||g>24)return NaN;d+=g.length;g--}else if(c==="mm"||c==="m"){l=j(a,d,c.length,2);if(l===null||l<0||l>59)return NaN;d+=l.length}else if(c==="ss"||c==="s"){m=j(a,d,c.length,2);if(m===null||m<0||m>59)return NaN;d+=m.length}else if(c==="a"){if(a.substring(d,d+2).toLowerCase()==="am")p="AM";else if(a.substring(d,d+2).toLowerCase()==="pm")p="PM";else return NaN;d+=2}else if(a.substring(d,d+c.length)!==
c)return NaN;else d+=c.length}if(d!==a.length)return NaN;if(h===2)if(i%4===0&&i%100!==0||i%400===0){if(k>29)return NaN}else if(k>28)return NaN;if((h===4||h===6||h===9||h===11)&&k>30)return NaN;g<12&&p==="PM"?g=g-0+12:g>11&&p==="AM"&&(g-=12);return(new Date(i,h-1,k,g,l,m)).getTime()};Date.parse=function(a,b){if(b)return z(a,b);var d=y(a),e=0,f;if(isNaN(d)&&(f=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(a)))f[8]!==
"Z"&&(e=+f[10]*60+ +f[11],f[9]==="+"&&(e=0-e)),d=Date.UTC(+f[1],+f[2]-1,+f[3],+f[4],+f[5]+e,+f[6],+f[7].substr(0,3));return d};Date.today=function(){return(new Date).clearTime()};Date.tomorrow=function(){return Date.today().add({days:1})};Date.yesterday=function(){return Date.today().add({days:-1})};Date.validateDay=function(a,b,d){var e=new Date(b,d,a);return e.getFullYear()===b&&e.getMonth()===d&&e.getDate()===a};Date.validateYear=function(a){return a>=0&&a<=9999};Date.validateSecond=function(a){return a>=
0&&a<60};Date.validateMonth=function(a){return a>=0&&a<12};Date.validateMinute=function(a){return a>=0&&a<60};Date.validateMillisecond=function(a){return a>=0&&a<1E3};Date.validateHour=function(a){return a>=0&&a<24};Date.compare=function(a,b){if(a.valueOf()<b.valueOf())return-1;else if(a.valueOf()>b.valueOf())return 1;return 0};Date.equals=function(a,b){return a.valueOf()===b.valueOf()};Date.getDayNumberFromName=function(a){return v[a.toLowerCase()]};Date.getMonthNumberFromName=function(a){return w[a.toLowerCase()]};
Date.isLeapYear=function(a){return(new Date(a,1,29)).getDate()===29};Date.getDaysInMonth=function(a,b){return b===1?Date.isLeapYear(a)?29:28:x[b]};b("getMonthAbbr",function(){return r[this.getMonth()]});b("getMonthName",function(){return s[this.getMonth()]});b("getUTCOffset",function(){var a=e(Math.abs(this.getTimezoneOffset()/0.6),4);this.getTimezoneOffset()>0&&(a="-"+a);return a});b("toCLFString",function(){return e(this.getDate(),2)+"/"+this.getMonthAbbr()+"/"+this.getFullYear()+":"+e(this.getHours(),
2)+":"+e(this.getMinutes(),2)+":"+e(this.getSeconds(),2)+" "+this.getUTCOffset()});b("toYMD",function(a){a=typeof a==="undefined"?"-":a;return this.getFullYear()+a+e(this.getMonth()+1,2)+a+e(this.getDate(),2)});b("toDBString",function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1,2)+"-"+e(this.getUTCDate(),2)+" "+e(this.getUTCHours(),2)+":"+e(this.getUTCMinutes(),2)+":"+e(this.getUTCSeconds(),2)});b("clearTime",function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);
return this});b("add",function(a){a.milliseconds!==void 0&&this.setMilliseconds(this.getMilliseconds()+a.milliseconds);a.seconds!==void 0&&this.setSeconds(this.getSeconds()+a.seconds);a.minutes!==void 0&&this.setMinutes(this.getMinutes()+a.minutes);a.hours!==void 0&&this.setHours(this.getHours()+a.hours);a.days!==void 0&&this.setDate(this.getDate()+a.days);a.months!==void 0&&this.setMonth(this.getMonth()+a.months);a.years!==void 0&&this.setFullYear(this.getFullYear()+a.years);return this});b("addMilliseconds",
function(a){return this.add({milliseconds:a})});b("addSeconds",function(a){return this.add({seconds:a})});b("addMinutes",function(a){return this.add({minutes:a})});b("addHours",function(a){return this.add({hours:a})});b("addDays",function(a){return this.add({days:a})});b("addWeeks",function(a){return this.add({days:a*7})});b("addMonths",function(a){return this.add({months:a})});b("addYears",function(a){return this.add({years:a})});b("setTimeToNow",function(){var a=new Date;this.setMilliseconds(a.getMilliseconds());
this.setSeconds(a.getSeconds());this.setMinutes(a.getMinutes());this.setHours(a.getHours())});b("clone",function(){return new Date(this.valueOf())});b("between",function(a,b){return this.valueOf()>=a.valueOf()&&this.valueOf()<=b.valueOf()});b("compareTo",function(a){return Date.compare(this,a)});b("equals",function(a){return Date.equals(this,a)});b("isAfter",function(a){a=a?a:new Date;return this.compareTo(a)>0});b("isBefore",function(a){a=a?a:new Date;return this.compareTo(a)<0});b("getDaysBetween",
function(a){return(a.clone().valueOf()-this.valueOf())/864E5|0});b("getHoursBetween",function(a){return(a.clone().valueOf()-this.valueOf())/36E5|0});b("getMinutesBetween",function(a){return(a.clone().valueOf()-this.valueOf())/6E4|0});b("getSecondsBetween",function(a){return(a.clone().valueOf()-this.valueOf())/1E3|0});b("getOrdinalNumber",function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864E5)+1});b("toFormat",function(a){a=a.replace("YYYY",this.getFullYear());
a=a.replace("YY",String(this.getFullYear()).slice(-2));a=a.replace("MM",e(this.getMonth()+1,2));a=a.replace("DD",e(this.getDate(),2));a=a.replace("HH24",e(this.getHours(),2));a=a.replace("HH",e(this.getHours()%12,2));a=a.replace("MI",e(this.getMinutes(),2));return a=a.replace("SS",e(this.getSeconds(),2))})})();