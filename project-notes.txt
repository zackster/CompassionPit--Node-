CompassionPit--Node- notes:
-------------
> forked the project in github and cloned it to have a local version to work on.
  $ git clone git@github.com:<username>/CompassionPit--Node-.git

--------
To get project to run:
> git ignores config.js. got the file from zack.

> install GeoIP lib:
    wget http://geolite.maxmind.com/download/geoip/api/c/GeoIP-1.4.7.tar.gz
    tar -xvzf GeoIP-1.4.7.tar.gz
    cd GeoIP-1.4.7
    ./configure
    make 
    sudo make install 

> npm install geoip.

> cd node_modules/hashlib
  node-waf configure build

> sudo node app.js

> cloud9 will run the project but i had trouble setting and hitting a breakpoint.
  needs more exploration.

--------

Discoveries:
> url of 'venter' or 'listener' renders views/chat.jade

> i didn't know what 'use strict' means or does, so i looked it up:
  It catches some common coding bloopers, throwing exceptions.
  It prevents, or throws errors, when relatively "unsafe" actions are taken 
    (such as gaining access to the global object).
  It disables features that are confusing or poorly thought out.
  "not in Firefox 3.6, Safari 5, Chrome 7 and Opera 10.6 (all Mac). 
  Didn't test in IE9 though ;) â€“ Nov 10 '10	  
  Firefox 4 has complete support for strict mode, and as far as I can tell, no other browser does.
  Safari and Chrome have "partial" support, but I don't really know what that means."

> took a few minutes to figure out that socketHanders class is not defined somewhere;
  it is created on the fly in mergeServers() in app.js.
  
> not seeing how button was implemented in chat.jade until i realized it is in static/chat.js.

> finally dawned that 'type' in chat.jade line 'window.CLIENT_TYPE = !{JSON.stringify(type)};'
  is passed in with the render() call.
  
> Rooms class defined in rooms/models.js. The queues for venters/listeners are there.

> When a user is added to room, 'Room.addUser()' is called;
  which sends both users a 'join' message with geoInfo;
  which pushes message to queue and flushes queue;
  which sends message to client using id from app.socket.clients[].

> <User>.lookupGeoIP(callback) is called to get geo info.
> <User>.send(message) is called to have message displayed in users chat window.

> added an id to the status text input and focus on it when window is activated.
  i'm not sure if that fixes the problem of having the field be in focus after clicking the
  'find new partner' button.

 
Not Understood:
> what is the config item 'serveMerged' mean? it is set 'true' in config.
> whole calls 'mergeStatic(function())'.
> so chat.jade is source for html, but no header tag or linking of js files or css file?
  how does jade know to use static/chat.js and static/css/style.css? is that a feature of jade?
> where are calls to socketHandlers.register()?
> i am still having trouble seeing where some messages originate.

